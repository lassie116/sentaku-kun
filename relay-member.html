<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>リレーメンバー選択くん</title>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script type="text/javascript">
    var members = [
      { name: 'かまぼこ', id: 'kamaboko21', rate: 2719, max:2926, type: '居飛車'  },
      // { name: 'みるふぃ', id: 'millfy', rate: 2748, max:2748, type: '左美濃'  },
      { name: 'tr', id: 'merumon', rate: 2022, max:2022, type: '左美濃' },
      { name: '木箱', id: 'BLACK.RX', rate: 2022, max:2142, type: '居飛車' },
      // { name: 'ゆー', id: 'alla breve', rate: 2115, max:2224, type: '居飛車' },
      { name: 'いまい', id: 'megane-wo-gurun', rate: 1770, max:1770, type: '居飛車' },
      { name: 'かーみ', id: 'G.G.ka-mi', rate: 1733, max:2014, type: '振り飛車'},
      { name: 'てっそ', id: 'DragonQuarter', rate: 1704, max:2167, type: '振り飛車' },
      { name: 'ニノン', id: 'transition_game', rate: 1674, max:1791, type: '居飛車' },
      { name: 'DoG', id: 'skziun', rate: 1672, max: 1672, type: '振り飛車' },
      { name: 'さぼり', id: 'sawarin', rate: 1564, max:1790, type: '居飛車' },
      { name: '半袖', id: 'cosmotown', rate: 1209, max:1209, type: '振り飛車' },
      // { name: 'あひる', id: 'ahirutueee', rate: 879, max:1069, type: 'あひる' },
      // { name: 'ゼノフォべ', id: 'xenophobe', rate: 1019, max:1019, type: '振り飛車' },
      // { name: '牛乳', id: 'sunnyspot', rate: 768, max:924, type: '振り飛車' },
      { name: 'よかおじ', id: 'SPACEACE', rate: 1058, max:1058, type: '居飛車' },
      { name: 'あひる', id: 'ahirutueee', rate: 1030, max:1030, type: '居飛車' },
      //{ name: 'やくたみ', id: 'itirin', rate: 599, max:640, type: '居飛車' },
      //{ name: 'サンダー', id: 'thunder9', rate: 545, max:747, type: '振り飛車' },
      // { name: '茶王', id: 'J_Addai', rate: 531, max:584, type: '振り飛車' },
      //{ name: '佐賀', id: 'shigasan', rate: 567, max:693, type: 'オールラウンダー' },
      { name: 'うどん', id: '3cha-man', rate: 550, max:681, type: '振り飛車' },
      //{ name: '箙', id: 'Quiver_algebra', rate: 547, max:532, type: '居飛車' },
      //{ name: 'みづの', id: 'mibuno', rate: 434, max: 1000, type: '居飛車' },
      { name: 'あくましんかん', id: 'akumasinkan', rate: 435, max: 435, type: '居飛車' },
      { name: 'やの', id: 'BBP_YN', rate: 232, max: 232, type: '？' },
      //{ name: 'なー', id: 'na-san777', rate: 1530, max: 1530, type: '？' },
      //{ name: 'ひとり', id: 'futari', rate: 785, max: 785, type: '？' },
      //{ name: 'T4kane', id: 'Jean-MichelFrank', rate: 456, max: 456, type: '？' },
      //{ name: 'ラドウェン', id: 'raduwen.vim', rate: 209, max: 209, type: '？' },
      //{ name: '白山いちげ', id: 'Haxan1', rate: 873, max: 873, type: '？' },

      { name: '三人で参加', id: '', rate: 1600, max: 1600, type: 'ダミー' }
    ];
    var match_table = [];  // TODO: 人間関係を更新しよう。
    /*
    var match_table = [
      {name: 'ニノン', good:['かまぼこ','てっそ','tr','いまい','DoG'], bad:['かーみ']},
      {name: 'よかおじ', good:[], bad:['うどん']},
      {name: 'tr', good:['みるふぃ'], bad:[]},
      {name: 'みるふぃ', good:['tr'], bad:[]},
      { name: '佐賀',good:['かまぼこ','牛乳','ゆー'],bad:[]},
      { name: 'かまぼこ',good:['佐賀','牛乳','ゆー'],bad:[]},
      { name: 'ゆー',good:['佐賀','かまぼこ','牛乳'],bad:[]},
      { name: '牛乳',good:['佐賀','かまぼこ','ゆー'],bad:[]},
    ]
    */
    var notes = [];  // TODO: チーム案を更新しよう。
    /*
    var notes = [
      // 基準値超え
      //{
      //    names: ['transition_game', 'alla breve', 'BLACK.RX', 'thunder9'],
      //    note: 'ニノンと謎川と私 (2012年)'
      //},
      {
        names: ['sawarin', 'cosmotown', 'sunnyspot', 'shigasan'],
        note: 'タラバガニだいすき (2013年)'
      },
      {
        names: ['kamaboko21', 'alla breve', 'sunnyspot', 'shigasan'],
        note: 'ピアキャス将棋部オールスターズ (2014年、2015年)'
      },
      {
        names: ['kamaboko21', 'BLACK.RX', 'sunnyspot', 'shigasan'],
        note: 'ピアキャス将棋部オールスターズ (2014年、2015年)'
      },
      // 基準値超え
      //{
      //    names: ['BLACK.RX', 'transition_game', 'megane-wo-gurun', 'ahirutueee'],
      //    note: 'Duckin\' Upper (2014年)'
      //},
      {
        names: ['G.G.ka-mi', 'sawarin', 'cosmotown', '3cha-man'],
        note: 'ピアキャス将棋部3軍 (2014年)'
      },
      {
        names: ['transition_game', 'G.G.ka-mi', 'sawarin', 'itirin'],
        note: 'チャンネル登録者約5541人 (2015年)'
      },
      {
        names: ['DragonQuarter', 'megane-wo-gurun', 'cosmotown', 'xenophobe'],
        note: '桃尻ズ (2015年)'
      },
      {
        names: ['merumon', 'skziun', 'ahirutueee', '3cha-man'],
        note: 'うどんJAPAN (2015年)'
      },
      {
        names: ['merumon', 'G.G.ka-mi', 'skziun', 'ahirutueee'],
        note: 'かーみJAPAN (うどん案)'
      },
      {
        names: ['merumon', 'megane-wo-gurun', 'skziun', 'ahirutueee'],
        note: 'プログラマーチーム (いまい案)'
      },
      {
        names: ['merumon', 'megane-wo-gurun', 'skziun', 'itirin'],
        note: 'プログラマーチームwithデバッガーやくたみ (いまい案)'
      },
      {
        names: ['BLACK.RX', 'transition_game', 'sawarin', 'SPACEACE'],
        note: 'こういうのでたのまい byニノン'
      },
      {
        names: ['alla breve', 'merumon', 'transition_game', 'SPACEACE'],
        note: 'こういうのでたのまい byニノン'
      },
      {
        names: ['DragonQuarter', 'G.G.ka-mi', 'skziun', 'cosmotown'],
        note: 'めっちゃつよそう byあひる'
      },
      {
        names: ['kamaboko21', 'DragonQuarter', 'cosmotown', 'shigasan'],
        note: 'ぼくがかんがえたさいきょうのふりびしゃちーむ byてっそ'
      },
      {
        names: ['G.G.ka-mi', 'cosmotown', 'ahirutueee', 'SPACEACE'],
        note: 'おしえて！かーみ先生！ ～ぬるま湯脱出への道～ (半袖案)'
      },
      {
        names: ['shigasan', 'DragonQuarter', 'kamaboko21', 'sunnyspot'],
        note: '新生オールスターズ(確定)'
      },
      {
        names: ['cosmotown', 'merumon', 'millfy', 'SPACEACE'],
        note: 'trチーム(ほぼ確定)'
      },
      {
        names: ['megane-wo-gurun', 'skziun', 'BLACK.RX', 'itirin'],
        note: '今井案(ほぼ確定)'
      },
      {
        names: ['alla breve', 'transition_game', 'Quiver_algebra', 'thunder9'],
        note: 'かーみ案'
      }
      // {
      //   names: ['sawarin', 'G.G.ka-mi', 'ahirutueee', ''],
      //   note: 'さぼり監督チームあひる(三人確定)'
      // }
    ];
    */
    var RelayMemberSelector = function() {
      this.members = null;
      this.maxRate = 6400; // 上限レート
      this.minRate = 4000; // 下限レート
      this.n = null;
      this.k = 4;
      this.combination = [];
      this.combinationList = [];
      this.notes = {};
      this.selectable = []; // 選択する候補にいれるかどうか
      this.match_table = []; // 相性テーブル
      this.preserve = []; // 仮確定データ
    };
    RelayMemberSelector.prototype.setMembers = function(members) {
      var self = this;
      self.members = members;
      self.n = members.length;

      var l = members.length;
      for (var i = 0;i<l;i++){
        self.selectable[i] = true;
      }

      // match_table 初期化
      for (var i = 0;i<l;i++){
        var line = [];
        self.match_table.push(line);
        for (var j = 0;j<l;j++){
          line.push(0);
        }
      }
      // console.log(self.match_table);

      // match_table 設定
      for (var i = 0,ml=match_table.length;i<ml;i++) {
        var t = match_table[i];
        var name = t.name;
        var src_id = self.getMemberIndexbyName(name);

        // good
        for (var j = 0,l=t.good.length;j<l;j++) {
          var tname = t.good[j];
          var t_id = self.getMemberIndexbyName(tname);
          self.match_table[src_id][t_id] = 1;
        }

        // bad
        for (var j = 0,l=t.bad.length;j<l;j++) {
          var tname = t.bad[j];
          var t_id = self.getMemberIndexbyName(tname);
          self.match_table[src_id][t_id] = -1;
        }
      }
    };
    RelayMemberSelector.prototype.setNotes = function(notes) {
      var self = this;
      self.notes = {};
      for (var noteIndex = 0; noteIndex < notes.length; noteIndex++) {
        var combination = [];
        for (var i = 0; i < self.k; i++) {
          for (var j = 0; j < self.members.length; j++) {
            if (notes[noteIndex].names[i] == self.members[j].id) {
              combination.push(j);
              continue;
            }
          }
        }
        if (combination.length == 4) {
          self.notes[self.toKey(combination)] = notes[noteIndex];
        }
      }
    };
    RelayMemberSelector.prototype.setSelectedMember = function() {
      var self = this;
      var selectedCount = 0;
      // 一旦全て未選択にする
      for (var i = 0; i < self.members.length; i++) {
        self.members[i].selected = false;
      }

      // 除外する人
      {
        var index;
        index=self.getMemberIndexbyName($('#member' + 4).val());
        if(index != null)
        {
          self.members[index].selected = true;
        }
      }
      // #member103で選択中の値を取得してself.combinationの値にする
      for (var i = 1; i <= 3; i++) {
        if ($('#member' + i).val()) {
          var index;
          if (null !== (index = self.getMemberIndexbyName($('#member' + i).val()))) {
            self.members[index].selected = true;
            self.combination[selectedCount++] = index;
          }
        }
      }
      return selectedCount;
    };
    RelayMemberSelector.prototype.getMemberIndexbyName = function(name) {
      var self = this;
      for (var i = 0; i < self.members.length; i++) {
        if (self.members[i].name == name) {
          return i;
        }
      }
      return null;
    };
    RelayMemberSelector.prototype.getCombinations = function() {
      var self = this;
      var depth = 0;
      var curIndex = 0;
      this.combinationList = [];
      var selectedCount = self.setSelectedMember();
      depth += selectedCount;
      self._getCombinations(curIndex, depth);
      return self.combinationList;
    };
    RelayMemberSelector.prototype._getCombinations = function(curIndex, depth) {
      var self = this;
      if (depth < self.k) {
        for (var i = curIndex; i < self.n; i++) {
          // 選択済みはスキップ
          if (self.members[i].selected) {
            continue;
          }
          // 候補にはいっていない人もスキップ
          if (!self.selectable[i]) {
            continue;
          }
          self.combination[depth] = i;
          self._getCombinations(i + 1, depth + 1);
        }
      } else {
        var sum = self.sumRate(self.combination);
        if (sum > self.maxRate || sum < self.minRate) {
          return;
        }
        var maxrate = self.sumMaxrate(self.combination);
        var names = self.getMemberNamesByCombination(self.combination);
        var ids = self.getMemberIdsByCombination(self.combination);
        var note = self.getNoteByCombination(self.combination);
        var good_sum = self.sumGood(self.combination);
        var bad_sum = self.sumBad(self.combination);
        self.combinationList.push({ names: names, ids: ids, rate: sum, max: maxrate, note: note ,
                                    good: good_sum, bad: bad_sum});
      }
    };
    RelayMemberSelector.prototype.sumRate = function(combination) {
      var self = this;
      var sum = 0;
      for (var i = 0; i < self.k; i++) {
        var index = combination[i];
        sum += self.members[index].rate;
      }
      return sum;
    };
    RelayMemberSelector.prototype.sumMaxrate = function(combination) {
      var self = this;
      var sum = 0;
      for (var i = 0; i < self.k; i++) {
        var index = combination[i];
        sum += self.members[index].max;
      }
      return sum;
    };
    RelayMemberSelector.prototype.sumGood = function(combination) {
      var l = combination.length;
      var sum = 0;
      for (var src_idx = 0; src_idx < l; src_idx++){
        var src_id = combination[src_idx];
        for (var t_idx = 0; t_idx < l; t_idx++){
          if (src_idx === t_idx) continue;
          var t_id = combination[t_idx];
          if (this.match_table[src_id][t_id] === 1) {
            sum += 1;
          }
        }
      }
      return sum;
    };
    RelayMemberSelector.prototype.sumBad = function(combination) {
      var l = combination.length;
      var sum = 0;
      for (var src_idx = 0; src_idx < l; src_idx++){
        var src_id = combination[src_idx];
        for (var t_idx = 0; t_idx < l; t_idx++){
          if (src_idx === t_idx) continue;
          var t_id = combination[t_idx];
          if (this.match_table[src_id][t_id] === -1) {
            sum -= 1;
          }
        }
      }
      return sum;
    };
    RelayMemberSelector.prototype.getMemberNamesByCombination = function(combination) {
      var self = this;
      var names = [];
      for (var i = 0; i < self.k; i++) {
        var index = combination[i];
        names.push(self.members[index].name);
      }
      return names;
    };
    RelayMemberSelector.prototype.getMemberIdsByCombination = function(combination) {
      var self = this;
      var ids = [];
      for (var i = 0; i < self.k; i++) {
        var index = combination[i];
        ids.push(self.members[index].id);
      }
      return ids;
    };
    RelayMemberSelector.prototype.getNoteByCombination = function(combination) {
      var self = this;
      var key = self.toKey(combination);
      return (key in self.notes) ? self.notes[key].note : '';
    };
    RelayMemberSelector.prototype.toKey = function(combination) {
      var self = this;
      var key = 0;
      for (var i = 0; i < self.k; i++) {
        key |= Math.pow(2, combination[i]);	//membersが32以上だと動かない
      }
      return key;
    };
    RelayMemberSelector.prototype.showResults = function(option) {
      var self = this;
      var combinations = self.getCombinations();
      // 合計レートが高い順にソートする
      combinations.sort(function(a, b) {
        if (b.rate < a.rate) return -1;
        if (b.rate > a.rate) return 1;
        return 0;
      });

      var preserve_idx = 0;
      $('#team-table-body').empty();
      $.each(self.preserve, function() {
        var labels;
        if (option["id-mode"]) {
          labels = this.ids;
        } else {
          labels = this.names;
        }
        var rate_list = [];
        for (var i = 0,l=this.names.length;i<l;i++){
          var name = this.names[i];
          var idx = self.getMemberIndexbyName(name);
          rate_list.push(self.members[idx].rate)
        }
        $('#team-table-body').append(
          '<tr>'
            + '<td><button class="team-delete-btn" value="'
            + preserve_idx
            + '">削除</button></td>'
            + '<td>' + labels[0] + '(' + rate_list[0] + ') </td>'
            + '<td>' + labels[1] + '(' + rate_list[1] + ') </td>'
            + '<td>' + labels[2] + '(' + rate_list[2] + ') </td>'
            + '<td>' + labels[3] + '(' + rate_list[3] + ') </td>'
            + '<td>' + this.rate + '</td>'
            + '<td>' + this.max  + '</td>'
            //+ '<td>' + this.good + '</td>'
            //+ '<td>' + this.bad  + '</td>'
            + '<td>' + this.note + '</td>'
            + '</tr>'
        );
        preserve_idx += 1;
      });

      $('#result').empty();
      var combi_idx = 0;
      $.each(combinations, function() {
        //console.log(this.names.join(' / ') + '(' + this.rate + ')');
        //console.log(this);
        var labels;
        if (option["id-mode"]) {
          labels = this.ids;
        } else {
          labels = this.names;
        }
        var rate_list = [];
        for (var i = 0,l=this.names.length;i<l;i++){
          var name = this.names[i];
          var idx = self.getMemberIndexbyName(name);
          rate_list.push(self.members[idx].rate)
        }
        $('#result').append(
          '<tr>'
            + '<td><button class="team-btn" value="' +  combi_idx + '">選択</button></td>'
            + '<td>' + labels[0] + '(' + rate_list[0] + ') </td>'
            + '<td>' + labels[1] + '(' + rate_list[1] + ') </td>'
            + '<td>' + labels[2] + '(' + rate_list[2] + ') </td>'
            + '<td>' + labels[3] + '(' + rate_list[3] + ') </td>'
            + '<td>' + this.rate + '</td>'
            + '<td>' + this.max  + '</td>'
            // + '<td>' + this.good + '</td>'
            // + '<td>' + this.bad  + '</td>'
            + '<td>' + this.note + '</td>'
            + '</tr>'
        );
        combi_idx += 1;
      });
      $(".team-btn").on('click',function(e) {
        // console.log(e.target.value);
        var idx = e.target.value;
        // console.log(combinations[idx]);

        var data = combinations[idx];
        self.preserve.push(data);
        var namelist = data.names
        for (var i = 0, l = data.names.length;i < l;i++) {
          var idx = self.getMemberIndexbyName(data.names[i]);
          self.selectable[idx] = false;
        }
        self.showResults(option);
      });
      $(".team-delete-btn").on('click',function(e) {
        // console.log(e.target.value);
        var idx = e.target.value;
        // console.log(combinations[idx]);

        var data = self.preserve[idx];
        // self.preserve.push(data);
        self.preserve.splice(idx,1);
        var namelist = data.names
        for (var i = 0, l = data.names.length;i < l;i++) {
          var idx = self.getMemberIndexbyName(data.names[i]);
          self.selectable[idx] = true;
        }
        self.showResults(option);
      });
    };

    RelayMemberSelector.prototype.calc_rate = function() {
      var self = this;
      var rest = 6400;
      for (var i = 1; i <= 3; i++) {
        if ($('#member' + i).val()) {
          var index;
          if (null !== (index = self.getMemberIndexbyName($('#member' + i).val()))) {
            rest -= self.members[index].rate;
          }
        }
      }
      $("#rest").text(rest);
      return;
    };

    RelayMemberSelector.prototype.showMembers = function() {
      var idx = 0;
      var self = this;
      $("#member-select").empty();
      $.each(members,function(){
        $("#member-select").hide();
        var input = $("<input>", {
          type: "checkbox",
          value: idx,
          id: this.id,
          class: "member_selection",
          checked: self.selectable[idx],
        });
        var label = $("<label>", { for: this.id }).text(this.name);
        $("#member-select").append(input).append(label);
        idx++;
      });
    }

    RelayMemberSelector.prototype.showName = function(option) {
      $('#name_table').empty();
      for (var idx in members)
      {
        $('#name_table').append(
            '<tr>'
            + '<td>' + members[idx].name + '</td>'
            + '<td>' + members[idx].id + '</td>'
            + '<td>' + members[idx].rate + '</td>'
            + '<td>' + members[idx].type + '</td>'
            + '</tr>'
            );
      }
      if (option['id-table']) {
        $('#member_profile').show();
      } else {
        $('#member_profile').hide();
      }
    }

    RelayMemberSelector.prototype.makeMatchTable = function() {
      var self = this;
      $("#match-table-div").empty();
      var table = $("<table>",{
        class : "match-table"
      })
      var l = self.members.length;

      // header
      var thead = $("<thead>");
      var tr = $("<tr>");
      for (var th_idx = 0;th_idx<=l;th_idx++){
        if (th_idx === 0) {
          var th = $("<th>",{class:"blank"});
        } else {
          var th = $("<th>").text(self.members[th_idx-1].name);
        }
        tr.append(th);
      }
      thead.append(tr)
      table.append(thead)

      // table row
      for (var tr_idx = 0;tr_idx<l;tr_idx++){
        var tr = $("<tr>");
        for (var td_idx = 0;td_idx<=l;td_idx++){
          if (td_idx === 0) {
            var td = $("<td>").text(self.members[tr_idx].name);
          } else if ((td_idx - 1) === tr_idx) {
            var td = $("<td>",{class:"blank"});
          } else {
            var td = $("<td>",{
              class:"match-input",
            });
            var select = $("<select>",{
              class : "match-selector",
              src_id: td_idx - 1,
              target_id: tr_idx,
            });

            var option_list = [
              "<option value='0'>---</option><option value='1'>良い</option>" +
                "<option value='-1' selected=true>悪い</option>",
              "<option value='0'>---</option><option value='1'>良い</option>" +
                "<option value='-1'>悪い</option>",
              "<option value='0'>---</option><option value='1' selected=true>良い</option>" +
                "<option value='-1'>悪い</option>",
            ];
            select.append(
              option_list[(self.match_table[td_idx - 1][tr_idx] + 1)]
            );
            td.append(select);
          }
          tr.append(td);
        }
        table.append(tr);
      }

      $("#match-table-div").hide();
      $("#match-table-div").append(table);
    }

    $(function() {
      relaySelector = new RelayMemberSelector();
      relaySelector.setMembers(members);
      relaySelector.setNotes(notes);
      option = {
        'id-mode': document.getElementById("btn-id-mode").checked,
        'id-table': document.getElementById("btn-id-table").checked
      };
      relaySelector.showName(option);
      console.log(option);
      // selectタグの中身を入れる
      $.each(members, function() {
        $('#member1').append('<option value="' + this.name + '">' + this.name + ' (' + this.rate +  ')</option>');
        $('#member2').append('<option value="' + this.name + '">' + this.name + ' (' + this.rate +  ')</option>');
        $('#member3').append('<option value="' + this.name + '">' + this.name + ' (' + this.rate +  ')</option>');
        $('#member4').append('<option value="' + this.name + '">' + this.name + ' (' + this.rate +  ')</option>');
      });
      $('#member1, #member2, #member3, #member4').on('change', function() {
        relaySelector.calc_rate();
        relaySelector.showResults(option);
      });

      relaySelector.showMembers();
      relaySelector.makeMatchTable();

      $('.member_selection').on('change', function(e) {
        var input_obj = e.target;
        var idx = input_obj.value;
        relaySelector.selectable[idx] = input_obj.checked;
        relaySelector.showResults(option);
      });
      $('#member-select-header').on('click', function(e) {
        var obj = $("#member-select");
        if (obj.css("display") === "none") {
          obj.show();
        } else {
          obj.hide();
        }
      });
      $('#match-table-header').on('click', function(e) {
        var obj = $("#match-table-div");
        if (obj.css("display") === "none") {
          obj.show();
        } else {
          obj.hide();
        }
      });
      $('.match-selector').on('change',function(e) {
        var self = relaySelector;
        // console.log(e.target);
        var obj = $(e.target);
        var src_id = parseInt(obj.attr("src_id"));
        var target_id = parseInt(obj.attr("target_id"));
        var select_idx = parseInt(e.target.selectedIndex);
        // console.log("(" + src_id + "," + target_id + ")");
        if (select_idx === 0) {
          self.match_table[src_id][target_id] = 0;
        } else if (select_idx === 1) {
          self.match_table[src_id][target_id] = 1;
        } else {
          self.match_table[src_id][target_id] = -1;
        }
        // console.log(self.match_table[src_id][target_id]);
        // console.log(self.match_table);
        self.showResults(option);
      });
      $('#member1').trigger('change');
      $('.config-btn').on('change', function(e) {
        var target = e.target;
        var value = target.value;
        // console.log(option, target, value);
        switch (value) {
          case 'id-mode':
            option['id-mode'] = target.checked;
            relaySelector.showResults(option);
            break;
          case 'id-table':
            option['id-table'] = target.checked;
            relaySelector.showName(option);
        }
      });
    });
  </script>

  <style type="text/css">
    h1 {
      font-size: 120%;
    }
    .member-list {
      font-size: 12px;
    }
    .member-list th, .member-list td {
      border: 1px solid #c3c3c3;
    }
    .member-list thead tr {
      background-color: #e0e0e0;
    }
    .member-list tbody tr {
      background-color: #ffffff;
    }
    .member-list tbody tr:nth-child(even) { /* 偶数番目の指定*/
      background-color: #f6f6f6;
    }
    .member-list .cell1, .member-list .cell2, .member-list .cell3, .member-list .cell4 {
      width: 120px;
    }
    .member-list .cell5 {
      width: 35px;
    }
    .member-list .cell6 {
      width: 280px;
    }
    .member-list .cell7 {
      width: 60px;
    }

    table.match-table {
      border-collapse: collapse;
    }
    .match-table th, .match-table td {
      font-size: 12px;
      // border: 1px solid #c3c3c3;
      width: 60px;
    }
    .match-table td.blank , .match-table th.blank {
      // background-color: #c3c3c3;
      width: 60px;
    }
  </style>
</head>
<body>
  <h1>リレーメンバー選択くん</h1>
  <div id="config">
    表示
    <input type="checkbox" class="config-btn" name="id-mode" value="id-mode" id="btn-id-mode" checked="false">
    <label for="btn-id-mode">IDで表示</label>
    <input type="checkbox" class="config-btn" name="id-table" value="id-table" id="btn-id-table">
    <label for="btn-id-table">ID対応表</label>
  </div>
<!-- 
  <h4 id="member-select-header">この人達から選ぶ (クリックで表示/非表示)</h4>
  <div id="member-select"></div>
  <h4 id="match-table-header">相性設定 (クリックで表示/非表示) </h4>
  <div id="match-table-div"></div>
  -->
  <h4>仮確定</h4>
  <table class="member-list">
    <thead>
      <tr>
        <th class="cell7"></th>
        <th class="cell1">1</th>
        <th class="cell2">2</th>
        <th class="cell3">3</th>
        <th class="cell4">4</th>
        <th class="cell5">sum</th>
        <th class="cell5">potential</th>
        <th class="cell6">note</th>
      </tr>
    </thead>
    <tbody id="team-table-body">
    </tbody>
  </table>
  <h4>メンバ選択</h4>
  残りレート <span id="rest">0</span>
  <div>
    ひとりめ
    <select id="member1">
      <option value="">---</option>
    </select><br>
    ふたりめ
    <select id="member2">
      <option value="">---</option>
    </select><br>
    さんにんめ
    <select id="member3">
      <option value="">---</option>
    </select><br>
    監督
    <select id="member4">
      <option value="">---</option>
    </select><br>
  </div>

  <table border="1" id="member_profile">
    <thead>
      <tr>
        <th class="name">name</th>
        <th class="id" >id</th>
        <th class="rate">rate</th>
        <th class="rate">type</th>
    </thead>
    <tbody id="name_table">
    </tbody>
  </table>

  <table class="member-list">
    <thead>
      <tr>
        <th class="cell7"></th>
        <th class="cell1">1</th>
        <th class="cell2">2</th>
        <th class="cell3">3</th>
        <th class="cell4">4</th>
        <th class="cell5">sum</th>
        <th class="cell5">potential</th>
        <th class="cell6">note</th>
      </tr>
    </thead>
    <tbody id="result">
    </tbody>
  </table>
</body>
</html>
